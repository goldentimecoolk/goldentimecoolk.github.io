<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/2/"/>





  <title>Hexo</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Hexo</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/08/06/2018-07-06-【pytorch】关于torch.nn的两点/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/08/06/2018-07-06-【pytorch】关于torch.nn的两点/" itemprop="url">【pytorch】关于torch.nn的两点</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-08-06T11:16:33+08:00">
                2018-08-06
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="torch-nn中的BatchNorm函数"><a href="#torch-nn中的BatchNorm函数" class="headerlink" title="torch.nn中的BatchNorm函数"></a>torch.nn中的BatchNorm函数</h3><hr>
<p><img src="img/image0065.png" alt="image0065"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">torch</span>.<span class="title">nn</span>.<span class="title">BatchNorm1d</span><span class="params">(num_features, eps=<span class="number">1e-05</span>, momentum=<span class="number">0.1</span>, affine=True, track_running_stats=True)</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">class</span> <span class="title">torch</span>.<span class="title">nn</span>.<span class="title">BatchNorm2d</span><span class="params">(num_features, eps=<span class="number">1e-05</span>, momentum=<span class="number">0.1</span>, affine=True, track_running_stats=True)</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">class</span> <span class="title">torch</span>.<span class="title">nn</span>.<span class="title">BatchNorm3d</span><span class="params">(num_features, eps=<span class="number">1e-05</span>, momentum=<span class="number">0.1</span>, affine=True, track_running_stats=True)</span></span></span><br></pre></td></tr></table></figure>
<p>对于<code>1d</code>，其实是2d或3d：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: (N,C)(N,C) <span class="keyword">or</span> (N,C,L)(N,C,L)</span><br><span class="line">Output: (N,C)(N,C) <span class="keyword">or</span> (N,C,L)(N,C,L) (same shape <span class="keyword">as</span> input)</span><br></pre></td></tr></table></figure></p>
<p>对于<code>2d</code>，其实是4d：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: (N,C,H,W)(N,C,H,W)</span><br><span class="line">Output: (N,C,H,W)(N,C,H,W) (same shape <span class="keyword">as</span> input)</span><br></pre></td></tr></table></figure></p>
<p>对于<code>3d</code>，其实是5d：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: (N,C,D,H,W)(N,C,D,H,W)</span><br><span class="line">Output: (N,C,D,H,W)(N,C,D,H,W) (same shape <span class="keyword">as</span> input)</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>The constructor builds a tuple whose items are the same and in the same order as iterable’s items. iterable may be either a sequence, a container that supports iteration, or an iterator object. If iterable is already a tuple, it is returned unchanged. For example, tuple(‘abc’) returns (‘a’, ‘b’, ‘c’) and tuple( [1, 2, 3] ) returns (1, 2, 3). If no argument is given, the constructor creates a new empty tuple, ().</p>
</blockquote>
<p><img src="img/image0087.png" alt="image0087"></p>
<p><img src="img/image0088.png" alt="image0088"></p>
<blockquote>
<p>Note that <strong>it is actually the comma which makes a tuple, not the parentheses</strong>. The parentheses are optional, except in the empty tuple case, or when they are needed to avoid syntactic ambiguity. For example, f(a, b, c) is a function call with three arguments, while f((a, b, c)) is a function call with a 3-tuple as the sole argument.</p>
</blockquote>
<h3 id="torch-nn与torch-nn-functional之间的区别和联系"><a href="#torch-nn与torch-nn-functional之间的区别和联系" class="headerlink" title="torch.nn与torch.nn.functional之间的区别和联系"></a>torch.nn与torch.nn.functional之间的区别和联系</h3><hr>
<h4 id="torch-nn-Conv2d"><a href="#torch-nn-Conv2d" class="headerlink" title="torch.nn.Conv2d"></a>torch.nn.Conv2d</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch.nn.functional <span class="keyword">as</span> F</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Conv2d</span><span class="params">(_ConvNd)</span>:</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, in_channels, out_channels, kernel_size, stride=<span class="number">1</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">         padding=<span class="number">0</span>, dilation=<span class="number">1</span>, groups=<span class="number">1</span>, bias=True)</span>:</span></span><br><span class="line">kernel_size = _pair(kernel_size)</span><br><span class="line">stride = _pair(stride)</span><br><span class="line">padding = _pair(padding)</span><br><span class="line">dilation = _pair(dilation)</span><br><span class="line">super(Conv2d, self).__init__(</span><br><span class="line">    in_channels, out_channels, kernel_size, stride, padding, dilation,</span><br><span class="line">    <span class="keyword">False</span>, _pair(<span class="number">0</span>), groups, bias)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self, input)</span>:</span></span><br><span class="line"><span class="keyword">return</span> F.conv2d(input, self.weight, self.bias, self.stride,</span><br><span class="line">                self.padding, self.dilation, self.groups)</span><br><span class="line">```                      </span><br><span class="line"><span class="comment">#### torch.nn.functional.conv2d  </span></span><br><span class="line">```python</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">conv2d</span><span class="params">(input, weight, bias=None, stride=<span class="number">1</span>, padding=<span class="number">0</span>, dilation=<span class="number">1</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">           groups=<span class="number">1</span>)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> input <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span> <span class="keyword">and</span> input.dim() != <span class="number">4</span>:</span><br><span class="line">        <span class="keyword">raise</span> ValueError(<span class="string">"Expected 4D tensor as input, got &#123;&#125;D tensor instead."</span>.format(input.dim()))</span><br><span class="line"></span><br><span class="line">    f = _ConvNd(_pair(stride), _pair(padding), _pair(dilation), <span class="keyword">False</span>,</span><br><span class="line">                _pair(<span class="number">0</span>), groups, torch.backends.cudnn.benchmark,</span><br><span class="line">                torch.backends.cudnn.deterministic, torch.backends.cudnn.enabled)</span><br><span class="line">    <span class="keyword">return</span> f(input, weight, bias)</span><br></pre></td></tr></table></figure>
<p>通过对比可以看出，<code>torch.nn.Conv2d</code>是一个类，而<code>torch.nn.functional.conv2d</code>是一个函数，并且，前者通过后者实现。也就是说<code>nn.Conv2d</code>是在<code>F.conv2d</code>外加的一层封装，从Module派生而来。关于Module最重要的一点是，它实现了<strong>call</strong>方法，在<strong>call</strong>方法里调用了<code>forward()</code>方法。所以，当执行<code>self.Conv2d(x)</code>，它就在调用Conv2d里面的<code>forward()</code>，并返回计算结果。通常在定义一些layer的时候，如果层内有weights、bias之类的参数时，用<code>torch.nn</code>，如果没有就用<code>torch.nn.functional</code>。</p>
<h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><hr>
<p><a href="https://blog.csdn.net/GZHermit/article/details/78730856" target="_blank" rel="noopener">https://blog.csdn.net/GZHermit/article/details/78730856</a><br><a href="https://blog.csdn.net/DuinoDu/article/details/76577498" target="_blank" rel="noopener">https://blog.csdn.net/DuinoDu/article/details/76577498</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/08/06/2018-07-06-【pytorch】resnet/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/08/06/2018-07-06-【pytorch】resnet/" itemprop="url">【pytorch】resnet</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-08-06T11:16:33+08:00">
                2018-08-06
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ResNet</span><span class="params">(nn.Module)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, block, layers, num_classes=<span class="number">1000</span>)</span>:</span></span><br><span class="line">        self.inplanes = <span class="number">64</span></span><br><span class="line">        super(ResNet, self).__init__()</span><br><span class="line">        self.conv1 = nn.Conv2d(<span class="number">3</span>, <span class="number">64</span>, kernel_size=<span class="number">7</span>, stride=<span class="number">2</span>, padding=<span class="number">3</span>,</span><br><span class="line">                               bias=<span class="keyword">False</span>)</span><br><span class="line">        self.bn1 = nn.BatchNorm2d(<span class="number">64</span>)</span><br><span class="line">        self.relu = nn.ReLU(inplace=<span class="keyword">True</span>)</span><br><span class="line">        self.maxpool = nn.MaxPool2d(kernel_size=<span class="number">3</span>, stride=<span class="number">2</span>, padding=<span class="number">1</span>)</span><br><span class="line">        self.layer1 = self._make_layer(block, <span class="number">64</span>, layers[<span class="number">0</span>])</span><br><span class="line">        self.layer2 = self._make_layer(block, <span class="number">128</span>, layers[<span class="number">1</span>], stride=<span class="number">2</span>)</span><br><span class="line">        self.layer3 = self._make_layer(block, <span class="number">256</span>, layers[<span class="number">2</span>], stride=<span class="number">2</span>)</span><br><span class="line">        self.layer4 = self._make_layer(block, <span class="number">512</span>, layers[<span class="number">3</span>], stride=<span class="number">2</span>)</span><br><span class="line">        self.avgpool = nn.AvgPool2d(<span class="number">7</span>, stride=<span class="number">1</span>)</span><br><span class="line">        self.fc = nn.Linear(<span class="number">512</span> * block.expansion, num_classes)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> m <span class="keyword">in</span> self.modules():</span><br><span class="line">            <span class="keyword">if</span> isinstance(m, nn.Conv2d):</span><br><span class="line">                n = m.kernel_size[<span class="number">0</span>] * m.kernel_size[<span class="number">1</span>] * m.out_channels</span><br><span class="line">                m.weight.data.normal_(<span class="number">0</span>, math.sqrt(<span class="number">2.</span> / n))</span><br><span class="line">            <span class="keyword">elif</span> isinstance(m, nn.BatchNorm2d):</span><br><span class="line">                m.weight.data.fill_(<span class="number">1</span>)</span><br><span class="line">                m.bias.data.zero_()</span><br><span class="line"></span><br><span class="line">	<span class="comment">####_make_layer() produce layers with the same output size and channels, which contains 'blocks' block.</span></span><br><span class="line">	<span class="comment">####downsample happens in the first layer</span></span><br><span class="line">	</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_make_layer</span><span class="params">(self, block, planes, blocks, stride=<span class="number">1</span>)</span>:</span></span><br><span class="line">        downsample = <span class="keyword">None</span></span><br><span class="line">        <span class="keyword">if</span> stride != <span class="number">1</span> <span class="keyword">or</span> self.inplanes != planes * block.expansion:</span><br><span class="line">            downsample = nn.Sequential(</span><br><span class="line">                nn.Conv2d(self.inplanes, planes * block.expansion,</span><br><span class="line">                          kernel_size=<span class="number">1</span>, stride=stride, bias=<span class="keyword">False</span>),</span><br><span class="line">                nn.BatchNorm2d(planes * block.expansion),</span><br><span class="line">            )</span><br><span class="line"></span><br><span class="line">        layers = []</span><br><span class="line">        layers.append(block(self.inplanes, planes, stride, downsample))     <span class="comment">#### make the 1st sublayer in given certain layer, which needs downsample. </span></span><br><span class="line">        self.inplanes = planes * block.expansion</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, blocks):                                          <span class="comment">#### make the other layers, from 1 to blocks-1 </span></span><br><span class="line">            layers.append(block(self.inplanes, planes))</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> nn.Sequential(*layers)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        x = self.conv1(x)</span><br><span class="line">        x = self.bn1(x)</span><br><span class="line">        x = self.relu(x)</span><br><span class="line">        x = self.maxpool(x)</span><br><span class="line"></span><br><span class="line">        x = self.layer1(x)</span><br><span class="line">        x = self.layer2(x)</span><br><span class="line">        x = self.layer3(x)</span><br><span class="line">        x = self.layer4(x)</span><br><span class="line"></span><br><span class="line">        x = self.avgpool(x)</span><br><span class="line">        x = x.view(x.size(<span class="number">0</span>), <span class="number">-1</span>)</span><br><span class="line">        x = self.fc(x)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> x</span><br></pre></td></tr></table></figure>
<h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><hr>
<p>PyTorch源码解读之torchvision.models</p>
<p><a href="https://blog.csdn.net/u014380165/article/details/79119664" target="_blank" rel="noopener">https://blog.csdn.net/u014380165/article/details/79119664</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/08/06/2018-07-06-【pycharm】import问题/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/08/06/2018-07-06-【pycharm】import问题/" itemprop="url">【pycharm】import问题</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-08-06T11:16:33+08:00">
                2018-08-06
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Pycharm下同一目录py文件不能相互调用？</p>
<p><a href="https://blog.csdn.net/candy_gl/article/details/79222115" target="_blank" rel="noopener">https://blog.csdn.net/candy_gl/article/details/79222115</a></p>
<p>caffe debug 1-Pycharm import caffe 报错 no module named caffe</p>
<p><a href="https://www.cnblogs.com/keyky/p/6600557.html" target="_blank" rel="noopener">https://www.cnblogs.com/keyky/p/6600557.html</a></p>
<p>pycharm中import caffe/caffe2</p>
<p><a href="https://blog.csdn.net/u013010889/article/details/70808866" target="_blank" rel="noopener">https://blog.csdn.net/u013010889/article/details/70808866</a></p>
<p>pycharm加入import路径 【显示当前已添加的路径】</p>
<p><a href="https://blog.csdn.net/hongxingabc/article/details/77094059" target="_blank" rel="noopener">https://blog.csdn.net/hongxingabc/article/details/77094059</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/08/06/2018-07-04-【dataset】voc数据集/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/08/06/2018-07-04-【dataset】voc数据集/" itemprop="url">【dataset】voc数据集</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-08-06T11:16:33+08:00">
                2018-08-06
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>数据集与自己的网络框架不匹配时，通常有两个解决思路：</p>
<ul>
<li>修改测试代码的接口，使其适应自己的数据格式；</li>
<li>将自己的数据格式转变为流行数据集，如voc的格式，然后使用标准的测试代码直接测试。</li>
</ul>
<p>下面针对第二种，分析一下标准数据集VOC的数据结构。</p>
<p>如下图，共有五个文件夹：</p>
<p><img src="img/image0060.png" alt="image0060"></p>
<p>其中：</p>
<p>Annotations存放<code>.xml</code>格式的文件：</p>
<p><img src="img/image0061.png" alt="image0061"></p>
<p>以<code>2007_000027.xml</code>为例：</p>
<p><img src="https://github.com/goldentimecoolk/goldentime/raw/master/_posts/image/image0062.png" alt="image0062"></p>
<ul>
<li>source：图像源</li>
<li>size：图片大小</li>
<li>object：物体名称（分类的类别）</li>
<li>…</li>
</ul>
<p>ImageSets下面有四个子文件夹，分别表示四种challenge对应的图像标签：</p>
<p><img src="img/image0063.png" alt="image0063"></p>
<ul>
<li>Action：人的动作</li>
<li>Layout：人体部位</li>
<li>Main：图像识别，一共20类</li>
<li>Segmentation：语义分割</li>
</ul>
<p>以Main文件夹为例，每个类都有xxx_train.txt、xxx_val.txt、xxx_trainval.txt三个文件，每一个class的train数据都有5717个，每一个class的val数据都有5823个，_trainval将上面两个进行了合并，每一个class有11540个。</p>
<blockquote>
<p>需要保证的是train和val两者没有交集，也就是训练数据和验证数据不能有重复，在选取训练数据的时候 ，也应该是随机产生的。</p>
</blockquote>
<p>JPEDImages存放这个数据集的所有图像数据，即<code>.jpg</code>：</p>
<p><img src="https://github.com/goldentimecoolk/goldentime/raw/master/_posts/image/image0064.png" alt="image0064"></p>
<p>JPEDImages与Annotations文件夹的数据一一对应。</p>
<p>最后是SegmentationClass和SegmentationObject两个文件夹，他们都是存放分割任务的分割结果。但是前者将同一类标注为同一种颜色，后者将不同的instance标注为不同的结果。</p>
<p><img src="img/2007_000032.jpg" alt="2007_000032.jpg"></p>
<p><img src="img/2007_000032cls.png" alt="2007_000032cls.png"></p>
<p><img src="img/2007_000032obj.png" alt="2007_000032obj.png"></p>
<h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><hr>
<p><a href="https://blog.csdn.net/zhangjunbob/article/details/52769381" target="_blank" rel="noopener">https://blog.csdn.net/zhangjunbob/article/details/52769381</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/08/06/2018-06-30-【caffe】python接口获取网络中的数据信息/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/08/06/2018-06-30-【caffe】python接口获取网络中的数据信息/" itemprop="url">【caffe】python接口获取网络中的数据信息</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-08-06T11:16:33+08:00">
                2018-08-06
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="查看神经网络中间层的blobs和params"><a href="#查看神经网络中间层的blobs和params" class="headerlink" title="查看神经网络中间层的blobs和params"></a>查看神经网络中间层的blobs和params</h3><p>Caffe主要处理两种形式的数据流： </p>
<ol>
<li>图像和标签在网络上的传输，随着网络的传输，它们转化更高层次的表示，最终以得分或者概率值的形式输出。 </li>
<li>第二种数据流，主要保存各个网络层的参数，比如卷积层的weights和bias. 这些值是随着的网络的训练过程不断变化的。</li>
</ol>
<p><strong>第一种形式的数据流</strong>保存在net.blobs中：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net.blobs</span><br></pre></td></tr></table></figure></p>
<p>它是<strong>有序字典</strong>，保存了每一层前后相应的数据。每个blob保存了data和gradient:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">net.blobs[<span class="string">'data'</span>].data.shape  <span class="comment"># &gt;&gt; (64, 1, 28, 28)</span></span><br><span class="line">net.blobs[<span class="string">'data'</span>].diff.shape  <span class="comment"># &gt;&gt; (64, 1, 28, 28)</span></span><br><span class="line"></span><br><span class="line">net.blobs[<span class="string">'conv1'</span>].data.shape  <span class="comment"># &gt;&gt; (64, 20, 24, 24)</span></span><br><span class="line">net.blobs[<span class="string">'conv1'</span>].diff.shape  <span class="comment"># &gt;&gt; (64, 20, 24, 24)</span></span><br><span class="line"></span><br><span class="line">net.blobs[<span class="string">'ip1'</span>].data.shape  <span class="comment"># &gt;&gt; (64, 500)</span></span><br><span class="line">net.blobs[<span class="string">'ip1'</span>].diff.shape  <span class="comment"># &gt;&gt; (64, 500)</span></span><br></pre></td></tr></table></figure></p>
<p><strong>第二种形式的数据流</strong>，即网络层的参数，可以通过net.layers来获得：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net.layers</span><br></pre></td></tr></table></figure></p>
<p>它的第一层是data layer:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">len(net.layers[<span class="number">0</span>].blobs)   <span class="comment"># &gt;&gt; 0</span></span><br></pre></td></tr></table></figure></p>
<p>因为输入层没有权重参数，因此blob的个数是0</p>
<p>它的第二层是卷积层：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">len(net.layers[<span class="number">1</span>].blobs)  <span class="comment"># &gt;&gt; 2</span></span><br><span class="line"></span><br><span class="line">net.layers[<span class="number">1</span>].blobs[<span class="number">0</span>].data.shape  <span class="comment"># &gt;&gt;  (20, 1, 5, 5)  conv1 weights</span></span><br><span class="line">net.layers[<span class="number">1</span>].blobs[<span class="number">1</span>].data.shape  <span class="comment"># &gt;&gt;  (20,)  bias</span></span><br></pre></td></tr></table></figure></p>
<p>表示有20个卷积核，每个卷积核的大小是5*5，处理1-channel的输入图像。</p>
<p>还有一种获得各层参数的方式就是net.params：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">print</span> net.params[<span class="string">'conv1'</span>][<span class="number">0</span>].data.shape   <span class="comment"># (20, 1, 5, 5)  conv1 weights</span></span><br><span class="line"><span class="keyword">print</span> net.params[<span class="string">'conv1'</span>][<span class="number">1</span>].data.shape   <span class="comment"># (20,) bias</span></span><br><span class="line">```	</span><br><span class="line">---</span><br><span class="line">	</span><br><span class="line"><span class="comment">#### 实例-查看blobs</span></span><br><span class="line">```python</span><br><span class="line"><span class="comment"># for each layer, show the output shape</span></span><br><span class="line"><span class="keyword">for</span> layer_name, blob <span class="keyword">in</span> net.blobs.iteritems():</span><br><span class="line">    <span class="keyword">print</span> layer_name + <span class="string">'\t'</span> + str(blob.data.shape)</span><br></pre></td></tr></table></figure></p>
<p>结果大致为：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">data    (<span class="number">50</span>, <span class="number">3</span>, <span class="number">227</span>, <span class="number">227</span>)</span><br><span class="line">conv1   (<span class="number">50</span>, <span class="number">96</span>, <span class="number">55</span>, <span class="number">55</span>)</span><br><span class="line">pool1   (<span class="number">50</span>, <span class="number">96</span>, <span class="number">27</span>, <span class="number">27</span>)</span><br><span class="line">norm1   (<span class="number">50</span>, <span class="number">96</span>, <span class="number">27</span>, <span class="number">27</span>)</span><br><span class="line">conv2   (<span class="number">50</span>, <span class="number">256</span>, <span class="number">27</span>, <span class="number">27</span>)</span><br><span class="line">pool2   (<span class="number">50</span>, <span class="number">256</span>, <span class="number">13</span>, <span class="number">13</span>)</span><br><span class="line">norm2   (<span class="number">50</span>, <span class="number">256</span>, <span class="number">13</span>, <span class="number">13</span>)</span><br><span class="line">conv3   (<span class="number">50</span>, <span class="number">384</span>, <span class="number">13</span>, <span class="number">13</span>)</span><br><span class="line">conv4   (<span class="number">50</span>, <span class="number">384</span>, <span class="number">13</span>, <span class="number">13</span>)</span><br><span class="line">conv5   (<span class="number">50</span>, <span class="number">256</span>, <span class="number">13</span>, <span class="number">13</span>)</span><br><span class="line">pool5   (<span class="number">50</span>, <span class="number">256</span>, <span class="number">6</span>, <span class="number">6</span>)</span><br><span class="line">fc6 (<span class="number">50</span>, <span class="number">4096</span>)</span><br><span class="line">fc7 (<span class="number">50</span>, <span class="number">4096</span>)</span><br><span class="line">fc8 (<span class="number">50</span>, <span class="number">1000</span>)</span><br><span class="line">prob    (<span class="number">50</span>, <span class="number">1000</span>)</span><br></pre></td></tr></table></figure></p>
<h4 id="实例-查看params"><a href="#实例-查看params" class="headerlink" title="实例-查看params"></a>实例-查看params</h4><p>函数为<code>net.params</code>,其中weight的样子应该是<code>（output_channels,input_channels,filter_height,flier_width）</code>, biases的形状只有一维<code>output_channels,</code><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> layer_name,parame <span class="keyword">in</span> net.params.iteritems():</span><br><span class="line"><span class="keyword">print</span> layer_name+<span class="string">'\t'</span>+str(param[<span class="number">0</span>].shape),str(param[<span class="number">1</span>].data.shape) <span class="comment">#可以看出param里0为weight，1为biase</span></span><br></pre></td></tr></table></figure></p>
<p>结果为：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">conv1   (<span class="number">96</span>, <span class="number">3</span>, <span class="number">11</span>, <span class="number">11</span>) (<span class="number">96</span>,)   <span class="comment">#输入3通道，输出96通道</span></span><br><span class="line">conv2   (<span class="number">256</span>, <span class="number">48</span>, <span class="number">5</span>, <span class="number">5</span>) (<span class="number">256</span>,)  <span class="comment">#输入为48，因为分成了两组，group=2</span></span><br><span class="line">conv3   (<span class="number">384</span>, <span class="number">256</span>, <span class="number">3</span>, <span class="number">3</span>) (<span class="number">384</span>,) <span class="comment">#这里的输入没变</span></span><br><span class="line">conv4   (<span class="number">384</span>, <span class="number">192</span>, <span class="number">3</span>, <span class="number">3</span>) (<span class="number">384</span>,)</span><br><span class="line">conv5   (<span class="number">256</span>, <span class="number">192</span>, <span class="number">3</span>, <span class="number">3</span>) (<span class="number">256</span>,)</span><br><span class="line">fc6 (<span class="number">4096</span>, <span class="number">9216</span>) (<span class="number">4096</span>,)        <span class="comment">#9216=256*3*3</span></span><br><span class="line">fc7 (<span class="number">4096</span>, <span class="number">4096</span>) (<span class="number">4096</span>,)</span><br><span class="line">fc8 (<span class="number">1000</span>, <span class="number">4096</span>) (<span class="number">1000</span>,)</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/08/06/2018-06-21-【shell】根据label.txt提取图片/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/08/06/2018-06-21-【shell】根据label.txt提取图片/" itemprop="url">【shell】根据label.txt提取图片</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-08-06T11:16:33+08:00">
                2018-08-06
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>目的：根据之前生成的label.txt，从源图片地址将每张用到的每张图片拷贝到新地址，即提取图片。</strong><br>背景：在制作测试集的过程中，需要根据每张图片的评分，将其从原来的存放位置挑选出来，移动到新的路径下。</p>
<ul>
<li><p>逐行读取txt，为保证正确性，在前面加上index，统计总数：<br><img src="img/image0051.png" alt="image0051"></p>
</li>
<li><p>加上路径前缀，构成绝对路径：<br><img src="img/image0052.png" alt="image0052"></p>
</li>
<li><p>提取空格前面的名字，和空格后面的数字，即类别：<br><img src="img/image0053.png" alt="image0053"></p>
</li>
<li><p>然后为每个类别创建一个文件夹，存放该类别的图片：<br><img src="img/image0054.png" alt="image0054"></p>
</li>
</ul>
<p>代码：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if [ ! -d $class ]; then</span><br><span class="line">  mkdir $b_dir/$class</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<p>最后就是copy了：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp $imgdire $b_dir/$class</span><br></pre></td></tr></table></figure></p>
<h4 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h4><hr>
<p>[1] <strong><a href="http://www.361way.com/readfile/240.html" target="_blank" rel="noopener">shell下读取文件的方法</a></strong></p>
<p>[2]<strong><a href="http://www.361way.com/shell-string-slice/5245.html" target="_blank" rel="noopener">shell字符串截断、切片与默认值</a></strong></p>
<p>[3] <strong><a href="https://my.oschina.net/u/1456911/blog/737164" target="_blank" rel="noopener">Linux脚本shell字符串处理（全）</a></strong></p>
<p>[4]<strong><a href="https://www.cnblogs.com/emanlee/p/3583769.html" target="_blank" rel="noopener">shell bash判断文件或文件夹是否存在</a></strong></p>
<p>[5]<a href="https://www.cnblogs.com/dwdxdy/archive/2012/07/25/2608816.html" target="_blank" rel="noopener">Shell脚本——逐行处理文本文件</a></p>
<p>[6]<a href="https://www.jb51.net/article/51348.htm" target="_blank" rel="noopener">Shell脚本中计算字符串长度的5种方法</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/08/06/2018-06-19-【评价指标】accuracy、precision、recall的来龙去脉/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/08/06/2018-06-19-【评价指标】accuracy、precision、recall的来龙去脉/" itemprop="url">【评价指标】accuracy、precision、recall的来龙去脉</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-08-06T11:16:33+08:00">
                2018-08-06
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="准确率-Accuracy-精确率-Precision-召回率-Recall-："><a href="#准确率-Accuracy-精确率-Precision-召回率-Recall-：" class="headerlink" title="准确率(Accuracy), 精确率(Precision), 召回率(Recall)："></a>准确率(Accuracy), 精确率(Precision), 召回率(Recall)：</h3><hr>
<p>之前对深度学习的量化指标的认识比较模糊，今天具体地整理一下各个指标的含义。只有明确量化指标，才能够对模型的质量更好地理解。</p>
<h4 id="单标签图像分类"><a href="#单标签图像分类" class="headerlink" title="单标签图像分类"></a>单标签图像分类</h4><p>下面形象地上一些概念：</p>
<p><img src="img/image0042.png" alt="image0042"></p>
<p>预测的正类个数/被检索到的样本个数为TP+FP，这些中正确的个数为TP，precision为两者的比例：precision=TP/(TP+FP)<br> <strong>该指标是为了突出某个class（即true positive）的预测效果，做到不预测则罢，一旦预测就要精准，要求精度。</strong> 比如预测家禽的种类，有鸡、鸭、鹅、牛、羊，如果把对‘羊’的预测当做P，那么其他的就是N，如果预测羊正确，TP+1，如果预测羊错误，FP+1。</p>
<p>所有正样本个数/应该被检索到的样本个数为TP+FN，正确检索到的正样本个数为TP，recall为两个的比例：<br>recall=TP/(TP+FN)<br><strong>该指标为了突出某个class的覆盖率，尽可能地预测到所有的正类，要求广度。</strong></p>
<p>所有样本数量为TP+TN+FP+FN，正确分类的样本个数为TP+TN，accuracy为两者的比例：<br>accuracy=(TP+TN)/(TP+TN+FP+FN)<br><strong>该指标比较均衡，不像上面两个指标只是突出正类，该指标追求综合的正确率。</strong></p>
<h4 id="多标签图像分类"><a href="#多标签图像分类" class="headerlink" title="多标签图像分类"></a>多标签图像分类</h4><hr>
<p>多标签图像分类（Multi-label   Image  Classification）任务中图片的标签不止一个，因此评价不能用普通单标签图像分类的标准，即mean  accuracy，该任务采用的是和信息检索中类似的方法——mAP（mean  Average  Precision）。mAP虽然字面意思和mean  accuracy看起来差不多，但是计算方法要繁琐得多，以下是mAP的计算方法：</p>
<p>首先用训练好的模型得到所有测试样本的confidence  score，每一类（如car）的confidence   score保存到一个文件中（如comp1_cls_test_car.txt）。假设<strong>（这个类）</strong>共有20个测试样本，每个的id，confidence  score和ground  truth  label如下：​​</p>
<blockquote>
<p><img src="img/image0043.png" alt="image0043"></p>
</blockquote>
<blockquote>
<p>对confidence  score排序，得到：</p>
</blockquote>
<blockquote>
<p><img src="img/image0044.png" alt="image0044"></p>
</blockquote>
<blockquote>
<p>然后计算precision和recall，这两个标准的定义如下：</p>
</blockquote>
<blockquote>
<p><img src="img/image0042.png" alt="image0042"></p>
</blockquote>
<blockquote>
<p>上图比较直观，圆圈内（true   positives + false  positives）是我们选出的元素,它对应于分类任务中我们取出的结果，比如对测试样本在训练好的car模型上分类，我们想得到top-5的结果，即：</p>
</blockquote>
<blockquote>
<p><img src="img/image0045.png" alt="image0045"></p>
</blockquote>
<blockquote>
<p>在这个例子中，true positives就是指第4和第2张图片，false positives就是指第13，19，6张图片。方框内圆圈外的元素（false negatives和true negatives）是相对于方框内的元素而言，在这个例子中，是指confidence score排在top-5之外的元素，即：</p>
</blockquote>
<blockquote>
<p><img src="img/image0046.png" alt="image0046"></p>
</blockquote>
<blockquote>
<p>其中，false   negatives是指第9，16，7，20张图片，true   negatives是指第1,18,5,15,10,17,12,14,8,11,3张图片。</p>
</blockquote>
<blockquote>
<p>那么，这个例子中Precision=2/5=40%，意思是对于car这一类别，我们选定了5个样本，其中正确的有2个，即准确率为40%；Recall=2/6=30%，意思是在所有测试样本中，共有6个car，但是因为我们只召回（检索到）了2个，所以召回率为30%。</p>
</blockquote>
<blockquote>
<p><strong>实际多类别分类任务中，我们通常不满足只通过top-5来衡量一个模型的好坏，而是需要知道从top-1到top-N（N是所有测试样本个数，本文中为20）对应的precision和recall。</strong>显然随着我们选定的样本越来也多，recall一定会越来越高，而precision整体上会呈下降趋势。把recall当成横坐标，precision当成纵坐标，即可得到常用的precision-recall曲线。这个例子的precision-recall曲线如下：</p>
</blockquote>
<blockquote>
<p><img src="img/image0048.png" alt="image0048"></p>
</blockquote>
<blockquote>
<p>接下来说说<strong>AP的计算</strong>，此处参考的是PASCAL  VOC  CHALLENGE的计算方法。首先设定一组阈值，[0, 0.1, 0.2, …, 1]。然后对于recall大于每一个阈值（比如recall&gt;0.3），我们都会得到一个对应的最大precision。这样，我们就计算出了11个precision。AP即为这11个precision的平均值。这种方法英文叫做11-point interpolated average precision。​</p>
</blockquote>
<blockquote>
<p>当然PASCAL VOC CHALLENGE自2010年后就换了另一种计算方法。新的计算方法假设这N个样本中有M个正例，那么我们会得到M个recall值（1/M, 2/M, …, M/M）,对于每个recall值r，我们可以计算出对应（r’ &gt; r）的最大precision，然后对这M个precision值取平均即得到最后的AP值。计算方法如下：​</p>
</blockquote>
<blockquote>
<p><img src="img/image0047.png" alt="image0047"></p>
</blockquote>
<blockquote>
<p>相应的Precision-Recall曲线（这条曲线是单调递减的）如下：​</p>
</blockquote>
<blockquote>
<p><img src="img/image0049.png" alt="image0049"></p>
</blockquote>
<blockquote>
<p><strong>AP衡量的是学出来的模型在每个类别上的好坏，mAP衡量的是学出的模型在所有类别上的好坏，得到AP后mAP的计算就变得很简单了，就是取所有AP的平均值。</strong></p>
</blockquote>
<p>top1 vs top5</p>
<p>To make things simple, we can specify the k in top-k only in test period. It seems there is no need to set k in training period. But if we induldge into the detail, we can find the subtle difference. If we set k in training, it see the situation where correct label occurs in top-k in the same way as that in top-1. So the particular accuracy is lower but seems with a stronger robust. We can also see this in the layer, to see if it functions in traing.</p>
<p>上面只是知道这些指标的含义，如何得到，即知其然，下面揣测一下<strong>其所以然</strong>：</p>
<p><strong>对于多标签分类，mean accuracy失去含义，只剩下另外两个基本的指标——precision和recall，前者要求精度，后者要求广度，本质上这两个指标是矛盾的，如果将其分开看，那样会很片面和极端，不能客观地反映分类性能，因此需要综合起来，在某个指标固定的前提下，讨论另一个指标。然而某个指标如何固定，这是个问题 ，也比较繁琐，因此默认将这个指标遍历，然后得到对应的另一个指标，最后将这些结果求平均值，即mAP。</strong></p>
<h3 id="reference"><a href="#reference" class="headerlink" title="reference"></a>reference</h3><hr>
<p>准确率(Accuracy), 精确率(Precision), 召回率(Recall)和F1-Measure</p>
<p><a href="https://blog.argcv.com/articles/1036.c" target="_blank" rel="noopener">https://blog.argcv.com/articles/1036.c</a></p>
<p>AP MAP Recall</p>
<p><strong><a href="http://blog.sina.com.cn/s/blog_9db078090102whzw.html" target="_blank" rel="noopener">http://blog.sina.com.cn/s/blog_9db078090102whzw.html</a></strong></p>
<p>caffe中的Accuracy</p>
<p><strong><a href="https://blog.csdn.net/scythe666/article/details/78790648" target="_blank" rel="noopener">https://blog.csdn.net/scythe666/article/details/78790648</a></strong></p>
<p><a href="https://blog.csdn.net/u011501388/article/details/77962401" target="_blank" rel="noopener">https://blog.csdn.net/u011501388/article/details/77962401</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/08/06/2018-06-15-【shell】select files from different folders and put them into subfolders/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/08/06/2018-06-15-【shell】select files from different folders and put them into subfolders/" itemprop="url">【shell】select files from different folders and put them into subfolders</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-08-06T11:16:33+08:00">
                2018-08-06
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Today, there is an emergency to deal with. Two folders are given. The first includes pure images and the second includes images with notifications and label txt. Document structure is as following:</p>
<ul>
<li>A/classes/pure images;</li>
<li>B/classes/ <ul>
<li>sub_a:  images with notifications;</li>
<li>sub_b:  corresponding label txt.</li>
</ul>
</li>
</ul>
<p>The images in folder A and B have the same file name, and there only difference is that A’s are origin but B’s are notified with ground truth.</p>
<p>Now I have to pick out origin images from folder A and its corresponding labels txt from folder B. Then rename the classes as increasing indexes from 1 to 2, 3, … And build a new pic folder and txt folder to contain images and labels respectively.</p>
<p>At beginning, I want to use a ‘pysical method’ — manully conduct these steps one by one. But there are as many as 212 classes and in every class’ folder, it usually has many subfolders in depth. So I quickly give up this method and turn to the shell code.</p>
<p>These are key points in the process:</p>
<ol>
<li>create folders from 1 to 212</li>
<li>create sub folders <code>pic</code> and <code>txt</code> in every folder</li>
<li>go through deep direction and target specific files, .jpg or .txt</li>
<li>distinguish from .jpg to .txt</li>
<li>copy file from a new folder</li>
<li>traverse class folder along A and B parallelly</li>
</ol>
<p>There are specific important commands of shell:</p>
<ol>
<li>create folders from 1 to 212</li>
<li>create sub folders <code>pic</code> and <code>txt</code> in every folder</li>
</ol>
<p>code:<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">for k in $( seq 1 10 )</span><br><span class="line">do</span><br><span class="line">    mkdir /media/sun/Seagate_Casia/tank/new/$&#123;k&#125;</span><br><span class="line">    dire=/media/sun/Seagate_Casia/tank/new/$&#123;k&#125;</span><br><span class="line">    mkdir $dire/pic</span><br><span class="line">    mkdir $dire/txt       </span><br><span class="line">done</span><br></pre></td></tr></table></figure></p>
<ol start="3">
<li>go through deep direction and target specific files, .jpg or .txt</li>
</ol>
<p>code:<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">function copy_pic()&#123;</span><br><span class="line">for file in `ls $1`       #the signal of system command ``</span><br><span class="line">do</span><br><span class="line">    if [ -d $1"/"$file ]  #notice the blank in this command</span><br><span class="line">    then</span><br><span class="line">        copy_pic $1"/"$file $2 $3      #this is very important for the func with more params</span><br><span class="line">    else</span><br><span class="line">        echo $1"/"$file   #handle with files there</span><br><span class="line">    fi</span><br><span class="line">done</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ol start="4">
<li>distinguish from .jpg to .txt</li>
</ol>
<p>code:<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if [ "$&#123;file##*.&#125;" = "jpg" ]</span><br><span class="line">    then</span><br><span class="line">	cp $1"/"$file $3 </span><br><span class="line">fi</span><br></pre></td></tr></table></figure></p>
<ol start="5">
<li>copy file from a new folder</li>
</ol>
<p>code:<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp $1"/"$file $3</span><br></pre></td></tr></table></figure></p>
<ol start="6">
<li>traverse class folder along A and B parallelly: This is a trick combining  above modules. Whole code is on my github.</li>
</ol>
<h3 id="Review"><a href="#Review" class="headerlink" title="Review"></a>Review</h3><hr>
<p>Divide whatever the problem into several sub problems, you will find it’s not that hard and not that unsolvable.</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/08/06/2018-06-15-【file with caffe】run label.py on remote server/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/08/06/2018-06-15-【file with caffe】run label.py on remote server/" itemprop="url">【file with caffe】run label.py on remote server</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-08-06T11:16:33+08:00">
                2018-08-06
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>I’ve writen the python file, using it to read images’ name, assign the same label to images in the same folder. Before this, I successfully run them in pycharm. However there seems to be a pure python without IDE in the server and I have to run .py in its terminal. There are some points deserve attention:</p>
<ul>
<li>the running command is <code>./filename.py</code>, the same as <code>filename.sh</code> previously run.</li>
<li>when I successfully run it, there is some errors:</li>
</ul>
<p><img src="img/image0035.png" alt="image0035"></p>
<p>the main error is <code>import: not found</code>. Notice that it’s not some module not found but the <code>import</code> itself. The reason is that I failed to specify which python to execute this .py. So I write this on the first line:</p>
<pre><code>#!/usr/bin/python
</code></pre><p>If you want to use your python with specific environments, you can write:</p>
<pre><code>#!/usr/bin/env python
</code></pre><p>Their differences are concluded as:</p>
<p><img src="img/image0036.png" alt="image0036"></p>
<ul>
<li>Fixing that, there is another error:</li>
</ul>
<p><img src="img/image0037.png" alt="image0037"></p>
<p>write this in the front:</p>
<pre><code>#&lt; pre class =&quot;python&quot; name=&quot;code&quot; &gt;  # coding:utf-8
</code></pre><h4 id="Other-Tips"><a href="#Other-Tips" class="headerlink" title="Other Tips"></a>Other Tips</h4><hr>
<p>Tip 1:</p>
<pre><code>frac = (float)(12000/40114) &gt;&gt; 0.0

frac = (float)12000/40114 &gt;&gt; error

frac = float(12000)/40114 &gt;&gt; 0.299
</code></pre><p>Tip 2:</p>
<p><code>tab</code> is 8 characters, so <code>anti-tab</code> move both 4-indent and 8-indent content to the first colum. This may cause some logical errors.</p>
<p><img src="img/image0038.png" alt="image0038"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/08/06/2018-06-18-【caffe】training log and visualizaiton/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/08/06/2018-06-18-【caffe】training log and visualizaiton/" itemprop="url">【caffe】training log and visualizaiton</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-08-06T11:16:33+08:00">
                2018-08-06
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="训练结果可视化"><a href="#训练结果可视化" class="headerlink" title="训练结果可视化"></a>训练结果可视化</h3><hr>
<h4 id="获取训练日志"><a href="#获取训练日志" class="headerlink" title="获取训练日志"></a>获取训练日志</h4><p>常规train或者test时，在命令前面加上<code>GLOG_logtostderr=0 GLOG_log_dir=&#39;your_own_path&#39;</code>,即：</p>
<pre><code>GLOG_logtostderr=0 GLOG_log_dir=/home/shukun/2018prcv/recognition/structure/ResNet_50/LOG /home/shukun/caffe/build/tools/caffe train -solver solver.prototxt -weights ResNet-50-model.caffemodel -gpu 1



GLOG_logtostderr=0 GLOG_log_dir=/home/shukun/2018prcv/recognition/structure/ResNet_50/LOG /home/shukun/caffe/build/tools/caffe test -model=test.prototxt -weights=snapshot_iter_12000.caffemodel -iterations=500 -gpu 1
</code></pre><p>之后系统会在指定目录下，生成四个文件：</p>
<p><img src="img/image0039.png" alt="image0039"></p>
<p>这里我们需要用到的是<code>caffe.usrname-Ubuntu.usrname.log.INFO.当前日期-当前时间.xxxx</code>。<strong>注意，</strong>应该在这个文件后面加上后缀<code>.log</code>，然后进行后续操作。</p>
<p>在此基础上，需要用caffe自带的工具进行绘图。进入路径<code>~/caffe/tools/extra</code>,将其中的<code>parse_log.sh</code>、<code>extract_seconds.py</code>和<code>plot_training_log.py.example</code>拷贝到log存放的文件夹，然后在终端执行：</p>
<pre><code>bash parse_log.sh caffe.ubuntu.shukun.log.INFO.20180618-175544.32514.log
</code></pre><p>生成两个文件：<code>caffe.ubuntu.shukun.log.INFO.20180618-175544.32514.log.test</code>和<code>caffe.ubuntu.shukun.log.INFO.20180618-175544.32514.log.train</code></p>
<p>这两个文件将绘图需要的直接数据提取了出来，相比之下原来的.log包含了我们训练/测试时在终端看到的所有信息。</p>
<p><img src="img/20180803-094731.png" alt=""></p>
<p><img src="img/20180803-094920.png" alt=""></p>
<h4 id="绘制accuracy、loss曲线"><a href="#绘制accuracy、loss曲线" class="headerlink" title="绘制accuracy、loss曲线"></a>绘制accuracy、loss曲线</h4><p>然后利用<code>./plot_training_log.py.example</code>画图，命令格式为：</p>
<pre><code>python plot_training_log.py.example 0 acc_iter.png caffe.ubuntu.shukun.log.INFO.20180618-175544.32514.log
</code></pre><p>其中第一个参数为数字0~7，每一个代表一种曲线类型：</p>
<ul>
<li>Supported chart types:<ul>
<li>0: Test accuracy  vs. Iters</li>
<li>1: Test accuracy  vs. Seconds</li>
<li>2: Test loss  vs. Iters</li>
<li>3: Test loss  vs. Seconds</li>
<li>4: Train learning rate  vs. Iters</li>
<li>5: Train learning rate  vs. Seconds</li>
<li>6: Train loss  vs. Iters</li>
<li>7: Train loss  vs. Seconds</li>
</ul>
</li>
</ul>
<p>第二个参数为保存的图片名称；</p>
<p>第三个参数为log文件，<strong>注意：</strong>这里必须先修改<code>train</code>或<code>test</code>阶段生成的log文件名——在<code>caffe.ubuntu.shukun.log.INFO.20180618-175544.32514</code>加上后缀<code>.log</code>，否则无法绘图。</p>
<h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><p><a href="https://blog.csdn.net/maweifei/article/details/53026349" target="_blank" rel="noopener">https://blog.csdn.net/maweifei/article/details/53026349</a></p>
<p><a href="https://blog.csdn.net/u013078356/article/details/51154847" target="_blank" rel="noopener">https://blog.csdn.net/u013078356/article/details/51154847</a></p>
<p><a href="https://blog.csdn.net/fx409494616/article/details/53197209" target="_blank" rel="noopener">https://blog.csdn.net/fx409494616/article/details/53197209</a></p>
<p><a href="https://blog.csdn.net/sinat_34474705/article/details/77065972" target="_blank" rel="noopener">https://blog.csdn.net/sinat_34474705/article/details/77065972</a></p>
<p><a href="https://blog.csdn.net/u011452869/article/details/54085275" target="_blank" rel="noopener">https://blog.csdn.net/u011452869/article/details/54085275</a> 【caffe训练日志输出】 </p>
<p><a href="https://blog.csdn.net/hduxiejun/article/details/53543617" target="_blank" rel="noopener">https://blog.csdn.net/hduxiejun/article/details/53543617</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">John Doe</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">31</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">John Doe</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
